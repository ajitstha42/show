{% extends "base.html" %} 
{% load static %} 
{% block title %} Posts {% endblock title %} 
{% block content %}
  {% for post in posts %}
    <article class="max-w-screen-md mx-auto p-3">
      <div class="flex items-center mb-3">
        <img
          src="{% if post.user.profile.picture %}{{ post.user.profile.picture.url }}{% else %}{% static 'images/default.jpg' %}{% endif %}"
          class="rounded-full w-12 h-12 inline-block mr-2"
        />
        <div>
          <p>{{ post.user.username }}</p>
          <p>{{ post.created_at|date:"Y-m-d" }}</p>
        </div>
      </div>
      <p>{{ post.title }}</p>

      {% if post.media_files.all %}
        <div class="max-w-700 grid grid-cols-2 gap-4 overflow-x-hidden relative">
          {% for media_file in post.media_files.all %}
            <div class="flex-shrink-0">
              {% if media_file.media.name|lower|slice:"-4:" == '.mp4' or media_file.media.name|lower|slice:"-4:" == '.mkv' %}
                <video controls class="w-full h-auto">
                  <source src="{{ media_file.media.url }}" type="video/mp4">
                  Your browser does not support the video tag.
                </video>
              {% else %}
                <img src="{{ media_file.media.url }}" alt="Post Image" class="w-full h-32 object-cover mb-2">
              {% endif %}
            </div>
          {% endfor %}
        </div>
      {% endif %}

      <div class="mt-3">
        <p>{{ post.description }}</p>
        <p>{{ post.comments.count }}</p>
      </div>
    </article>
  {% endfor %}
{% endblock content %}
